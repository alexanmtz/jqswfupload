<!DOCTYPE html>
<html>
<head>
	<title>jquery pload demo</title>
	<link rel="stylesheet" href="css/jquery-ui-1.8.4.custom.css" type="text/css" media="screen">
	<link rel="stylesheet" href="css/style.css" type="text/css" media="screen">
	<link rel="stylesheet" href="css/jquery.ui.pload.css" type="text/css" media="screen">
	<script type="text/javascript" src="libs/jquery-1.4.2.js"></script>
	<script type="text/javascript" src="libs/jquery.ui.core.js"></script>
	<script type="text/javascript" src="libs/jquery.ui.widget.js"></script>
	<script type="text/javascript" src="libs/jquery.effects.core.js"></script>
	<script type="text/javascript" src="libs/jquery.ui.button"></script>
	<script type="text/javascript" src="libs/jquery.ui.progressbar.js"></script>
	<script type="text/javascript" src="libs/jquery.blockUI.js"></script>
	<script type="text/javascript" src="libs/swfupload.js"></script>
	<script type="text/javascript" src="jquery.ui.pload.js"></script>
	<script type="text/javascript">
		$(function(){
			var uploadContainer = $('#jquery-ui-pload');
			uploadContainer.pload({
				url: 'upload.php',
				debug: true,
				fileUploadSuccess: function(file,data,response){
					$('#server-data pre').html(data);
				},
				uploadProgress: function(percent, currentFile) {
					$('#upload-progress .file').html(currentFile);
					$('#upload-progress .percent').html(percent + '%');
					$('#progress-bar').progressbar({value: percent}); 
				},
				uploadComplete: function() {
					$.unblockUI({ fadeOut: 200 }); 
					$('#server-data pre').html('all files are uploaded');
					$('#progress-bar').progressbar('disable');
				}
			});
			
			$('#start-upload').bind('click',function(){
				uploadContainer.pload('startUpload');
				if(!$('#upload-progress').length) {
					$('<div id="upload-progress"><span class="file"></span><span class="percent"></span><div id="progress-bar"></div></div>').appendTo('body');	
				}
				$('#upload-progress').hide();
				$.blockUI({ 
		            theme:     true, // true to enable jQuery UI support,
		            title: 'Upload progress', 
		            message:  $('#upload-progress')
    			});
				return false;
			});
			
		});
	</script>

</head>
<body>
	<div id="main">
		<h2>demo page</h2>
		<div id="jquery-ui-pload"></div>
		<a href="#" id="start-upload">start upload</a>
	</div>
	<div id="server-data"><pre></pre></div>
</body>
</html>
